
# Пакет примеров  для микроконтроллеров - PY32F0xx

## Варианты 
- PY32F002A,F003,F030  - (одинаковый чип PY32F030), периферия полностью одинаковая
- PY32F002B,L020       - экономичный MCU, периферии и памяти - меньше 

описание контроллеров можно почитать в шпаргалках<br>

[PY32F002A_003_03](https://github.com/Xiamatsu/py32f002a_003_030)<br>
[PY32F002B](https://github.com/Xiamatsu/py32f002b)


## Структура файлов
```
├── Drivers                    # библиотеки 
│   ├── BSP                      # шаблоны для примеров STK 
│   ├── CMSIS
│   ├── PY32F0xx_HAL_Driver      # PY32F002A+ только LL библиотека
│   └── PY32F002B_HAL_Driver     # PY32F002B  только LL библиотека
├── JLinkDevices               # описание для JLink программ
├── Packs                      # файлы описания MCU для Keil и отладки  
├── STK_LL_Projects            # стандартные примеры StartKit для LL библиотеки
├── SVD                        # файлы описания MCU для отладки  
├── _ll_examples               # примеры и шаблоны с использованием LL библиотеки
│   ├── F002B_vcc_temp           # измерение Vcc и температуры (UART TX - PB4)   
│   ├── F002B_vcc_temp_so8       # измерение Vcc и температуры (UART TX - PA7)   
│   └── F030_vcc                 # (в разработке)
├── _mini_examples             # примеры и шаблоны чисто на CMSIS
│   ├── F002B_Blink              # (в разработке)   
│   ├── F002B_LPx                # старт с HSI-min -> LSI и тестирование Flash Sleep     
│   ├── F030_Blink               # (в разработке)
│   ├── F030_LPx                 # старт с HSI-min -> LSI и тестирование Flash Sleep  
│   └── F030_ramcode             # LSI + FlashSleep + LPTIM - основная программа а RAM
├── openocd
└── README.md
```

## Описание примеров
```
минимальный набор, примеры чисто на CMSIS или библиотеке LL

LL
  F002B_vcc_temp      # измерение Vcc на основе Vref=1.2V  
                      # и измерение температуры с вн. датчика 
                      # x6 версия чипа - до 85°С
                      # вывод на - UART TX PB4   
  F002B_vcc_temp_so8  # тоже самое только для x7 версии - до 105°С
                      # вывод на - UART TX PA7  (soic-8)  
mini
  F002B_LPx           # старт с HSI-min ~2.1 МГц переход на LSI-min 19.7кГц 
                      # тестирование Flash Sleep  
                      # процедура возврата из Flash Sleep в startup файле
  F030_LPx            # старт с HSI-min ~2.1 МГц переход на LSI-min 19.7кГц 
                      # тестирование Flash Sleep 
                      # вход происходит и далее работает 
                      # при выходе зависает (?)
  F030_ramcode        # старт с HSI-min -> LSI(32.768k) + Flash Sleep + LPTIM(LSI)
                      # основная программа и функции в RAM
                      # пример использования LPTIM без прерываний - для задержек
                      # настроен startup и скрипт линкера для переноса кода в RAM
                      # (предварительно - процедура выхода из Flash Sleep работает в RAM ?)
```

## Дополнительно
```
Примеры переделаны от стандартных
  - system, startup, ldscript - перенесены в отдельную папку
  - для проектов LL отдельная папка BGP в каждом проекте, где копии файлов  *_LL_Start_Kit.*
    которые можно править - не меняя общие шаблоны в папке  Devices
  - в проектах сделаны 2 конфигурации(target) Debug/Release (по аналогии Eclipse)
    (в самом VSCode+EIDE непонятно как их добавлять - добавил прямо в файле eide.yml)
    (переключение - правой кнопкой мыши на проекте и "Switch Target")
    (соответственно две папки с результатами Debug Release)
  - дополнительно конфигурации для pyocd, openocd, jlink
    (пока только проверена работа с pyocd, jlink)
  - настроена генерация листинга  lst  из итогового  elf файла (дизасм)  
```

###  JLink
```
Файлы для настройки JLink в папке JLinkDevices<br>
скопировать содержимое папки в  <USER>\AppData\Roaming\SEGGER\JLinkDevices
```


### -------
```
При отдельной установке
  1.  GCC
  2.  Python + pyocd
  3.  VSCode + EIDE
  4.  Данные примеры

установка  PuyaSDE - не требуется
есть минусы при PuyaSDE - GCC - 10 версии, и т д
у меня постоянно при открытии готового чужого проекта 
заменяет ассемблерный startup на почти пустой с непонятным содержимым
SDE или EIDE что-то не так 
надо проверять на другом ПК
```
